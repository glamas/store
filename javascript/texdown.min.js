(function(){'use strict'var m='0.0.1';var n;var o;var p={}var q={}var r={plain:['body {','  color: #333;','}','main {','  max-width: 40em;','  margin-left: auto;','  margin-right: auto;','}','h1, h2, h3, h4, h5, h6, h7 {','  margin-top: 1.2em;','  margin-bottom: 0.5em;','}','a:link, a:visited {','  color: #03c;','  text-decoration: none;','}','a:hover, a:active {','  color: #03f;','  text-decoration: underline;','}','img {','  max-width: 100%;','}','pre, code, samp, kbd {','  font-family: monospace,monospace;','  font-size: 0.9em;','  color: #009;','}','pre code, pre samp, pre kbd {','  font-size: 1em;','}','pre {','  padding: 0.5em;','  overflow: auto;','  background: #eee;','}','blockquote {','  border-left: medium solid #ccc;','  margin-left: 0;','  margin-right: 0;','  padding: 0.5em;','  background: #eee;','}','blockquote *:first-child {','  margin-top: 0;','}','blockquote *:last-child {','  margin-bottom: 0;','}','table {','  border-collapse: collapse;','}','th, td {','  border: thin solid #999;','  padding: 0.3em 0.4em;','  text-align: left;','}'].join('\n'),viewer:['@media screen and (min-width: 40em) {','  body {','    background: #444;','  }','  main {','    background: #fff;','    padding: 5em 6em;','    margin: 1em auto;','    box-shadow: 0.4em 0.4em 0.4em #222;','  }','}'].join('\n'),none:''}r.viewer=r.plain+r.viewer var t=function(){var a for(a in q){if(typeof window!=='undefined'&&typeof window.texdown!=='undefined'&&typeof window.texdown[a]!=='undefined'){q[a]=window.texdown[a]}}}var u=function(a,b){var c=window.document.createElement('script')c.src=a c.onload=b window.document.head.appendChild(c)}p.setDefaultOptions=function(){q.renderOnLoad=true q.useMathJax=true q.protectMath=true q.markdownOnly=false q.style='viewer'options.katex={delimiters:[{left:'$$',right:'$$',display:true},{left:'\\(',right:'\\)',display:false},{left:'\\[',right:'\\]',display:true}],macros:{},throwOnError:false}q.marked={}q.markdownURL='https://cdn.jsdelivr.net/npm/marked/marked.min.js'options.katexURL='https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js'}p.setOption=function(a,b){q[a]=b}p.tokenType={MARK:0,MASK:1}p.tokenLiteral={MASK:'::MASK::'}var v=/^\\begin{/;var w=function w(a){return a.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")};var y=function y(a,b,c){var d=c;var e=0;var f=a.length;while(d<b.length){var g=b[d];if(e<=0&&b.slice(d,d+f)===a){return d}else if(g==="\\"){d++}else if(g==="{"){e++}else if(g==="}"){e--}d++}return-1};p.tokenize=function(b){var c=q.katex.delimiters var d=c.findIndex(function(a){return a.left=="$"})var e=0;var f=new RegExp("^`{3,}\\s*(\\w*\\b)?\\s*$","gm")var g var h=[]var j=new RegExp("("+c.map(function(x){return w(x.left)}).join("|")+")")while(true){g=b.search(j);if(g===-1){break}if(g>0){e=(e+(b.slice(0,g).match(f)||[]).length)%2;if(d!==-1&&b[g-1]==="\\"&&b[g]==="$"){h.push([p.tokenType.MARK,b.slice(0,g-1)+b[g+1]])b=b.slice(g+1);continue}h.push([p.tokenType.MARK,b.slice(0,g)])b=b.slice(g)}var i=c.findIndex(function(a){return b.startsWith(a.left)});g=y(c[i].right,b,c[i].left.length);if(g===-1){break}var k=b.slice(0,g+c[i].right.length);if(e){e=(e+(b.slice(0,g).match(f)||[]).length)%2;h.push([p.tokenType.MARK,b.slice(0,g)])b=b.slice(g);continue}var l=v.test(k)?k:b.slice(c[i].left.length,g);h.push([p.tokenType.MASK,[l,c[i].display]])b=b.slice(g+c[i].right.length)}if(b!==""){h.push([p.tokenType.MARK,b])}return h}p.mask=function(a){var b=[]var c=[]var d var e var i for(i=0;i<a.length;i++){d=a[i][0]e=a[i][1]if(d===p.tokenType.MARK){b.push(e)}else{b.push(p.tokenLiteral.MASK)c.push(e)}}return{text:b.join(''),tokenValues:c}}p.unmask=function(s,d){var e=new RegExp(p.tokenLiteral.MASK,'g')var i=0 return s.replace(e,function(){var a=d[i][0]var b=d[i][1]i=i+1 var c=q.katex c.displayMode=b return o.renderToString(a,c)})}p.renderMarkdown=function(s){return n(s,q.marked)}p.renderMarkdownAndKatex=function(s){var a=p.tokenize(s)var b=p.mask(a)var c=p.renderMarkdown(b.text)var d=p.unmask(c,b.tokenValues)return d}p.render=function(s){if(q.protectMath){return p.protectMathAndRenderMarkdown(s)}else{return p.renderMarkdown(s)}}p.renderToString=function(a,b){b=b||{}var c if(typeof window.document.title==='undefined'||window.document.title===''){c=a.split('\n',1)[0].replace(/^\s*#*\s*|\s*#*\s*$/g,'')window.document.title=c}if("marked"in b){for(var d in b["marked"]){q.marked[d]=b["marked"][d]}}if("katex"in b){for(var d in b["katex"]){q.katex[d]=b["katex"][d]}}if(("markdownOnly"in b&&b.markdownOnly)||q.markdownOnly){return p.renderMarkdown(a)}else{return p.renderMarkdownAndKatex(a)}}p.main=function(){p.setDefaultOptions()if(typeof window!=='undefined'){t()if(window.marked==undefined){u(q.markdownURL,function(){n=window.marked})}else{n=window.marked}if(window.katex==undefined){u(q.katexURL,function(){o=window.katex})}else{o=window.katex}window.texdown=p}else{n=require('marked')o=require("katex")module.exports=p}}p.main()})()
